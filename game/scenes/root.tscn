[gd_scene load_steps=30 format=3 uid="uid://c4mac68g6eja"]

[ext_resource type="Script" path="res://scenes/root.gd" id="1_drtle"]
[ext_resource type="PackedScene" uid="uid://bjh6o1j0m2p0u" path="res://models/drone.fbx" id="1_sdhml"]
[ext_resource type="Texture2D" uid="uid://bhj2j80tbfb8m" path="res://hdri/kloofendal_48d_partly_cloudy_puresky_8k.hdr" id="2_d6hck"]
[ext_resource type="PackedScene" path="res://addons/godot-xr-tools/misc/vr_common_shader_cache.tscn" id="3_go526"]
[ext_resource type="PackedScene" uid="uid://diyu06cw06syv" path="res://addons/godot-xr-tools/player/player_body.tscn" id="4_beeq5"]
[ext_resource type="PackedScene" uid="uid://bl2nuu3qhlb5k" path="res://addons/godot-xr-tools/functions/movement_direct.tscn" id="5_tf8k3"]
[ext_resource type="PackedScene" uid="uid://b4kad2kuba1yn" path="res://addons/godot-xr-tools/hands/scenes/lowpoly/left_hand_low.tscn" id="7_jrhbh"]
[ext_resource type="PackedScene" uid="uid://b6bk2pj8vbj28" path="res://addons/godot-xr-tools/functions/movement_turn.tscn" id="8_0i7al"]
[ext_resource type="PackedScene" uid="uid://b4ysuy43poobf" path="res://addons/godot-xr-tools/functions/function_pickup.tscn" id="8_utqbe"]
[ext_resource type="PackedScene" uid="uid://l2n30mpbkdyw" path="res://addons/godot-xr-tools/hands/scenes/lowpoly/right_hand_low.tscn" id="10_hlrtx"]
[ext_resource type="PackedScene" uid="uid://dlg5g0b3hj2k6" path="res://models/controller_right.fbx" id="10_lclre"]
[ext_resource type="PackedScene" uid="uid://c8l60rnugru40" path="res://addons/godot-xr-tools/objects/pickable.tscn" id="10_v7mpg"]
[ext_resource type="Script" path="res://scenes/joystick.gd" id="11_ltsit"]
[ext_resource type="PackedScene" uid="uid://c25yxb0vt53vc" path="res://addons/godot-xr-tools/objects/grab_points/grab_point_hand_left.tscn" id="12_rovoh"]
[ext_resource type="Script" path="res://addons/godot-xr-tools/hands/poses/hand_pose_settings.gd" id="13_b0n03"]
[ext_resource type="PackedScene" uid="uid://ctw7nbntd5pcj" path="res://addons/godot-xr-tools/objects/grab_points/grab_point_hand_right.tscn" id="13_trql2"]
[ext_resource type="Animation" uid="uid://db62hs5s4n2b3" path="res://addons/godot-xr-tools/hands/animations/left/Grip 4.res" id="14_vkyw8"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_yxwyt"]
panorama = ExtResource("2_d6hck")

[sub_resource type="Sky" id="Sky_e0nf4"]
sky_material = SubResource("PanoramaSkyMaterial_yxwyt")

[sub_resource type="Environment" id="Environment_b5eov"]
background_mode = 2
sky = SubResource("Sky_e0nf4")
ambient_light_sky_contribution = 0.46
adjustment_enabled = true

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_ma3fo"]

[sub_resource type="PlaneMesh" id="PlaneMesh_ri7pf"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_1ifvy"]
albedo_color = Color(0.243137, 0.380392, 0, 1)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_iu3bh"]
radius = 0.12013
height = 1.33654

[sub_resource type="CylinderMesh" id="CylinderMesh_hmnug"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_dsgym"]
albedo_color = Color(0.894118, 0, 0, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_l5fid"]

[sub_resource type="BoxMesh" id="BoxMesh_qye2y"]

[sub_resource type="Resource" id="Resource_841gg"]
script = ExtResource("13_b0n03")
closed_pose = ExtResource("14_vkyw8")

[node name="root" type="Node3D"]
script = ExtResource("1_drtle")

[node name="HDRI - WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_b5eov")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.823109, -0.0375014, -0.566644, 0.541292, 0.353573, 0.762883, 0.171741, -0.934655, 0.311328, -10.0162, 3.94641, 5.34912)
light_energy = 0.5
shadow_enabled = true
shadow_blur = 0.435

[node name="Ground - StaticBody3D" type="StaticBody3D" parent="."]
transform = Transform3D(50, 0, 0, 0, 50, 0, 0, 0, 50, 0, 0, 0)

[node name="Ground - CollisionShape3D" type="CollisionShape3D" parent="Ground - StaticBody3D"]
shape = SubResource("WorldBoundaryShape3D_ma3fo")

[node name="Ground - MeshInstance3D" type="MeshInstance3D" parent="Ground - StaticBody3D"]
transform = Transform3D(1.745, 0, 0, 0, 1.745, 0, 0, 0, 1.745, 0, 0, 0)
mesh = SubResource("PlaneMesh_ri7pf")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_1ifvy")

[node name="player - origin" type="XROrigin3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.102177, 1.03396, 0.105351)
current = true

[node name="PlayerBody" parent="player - origin" instance=ExtResource("4_beeq5")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="player - origin/PlayerBody"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.68749, 0)
shape = SubResource("CapsuleShape3D_iu3bh")

[node name="player- camera" type="XRCamera3D" parent="player - origin"]
current = true

[node name="VRCommonShaderCache" parent="player - origin/player- camera" instance=ExtResource("3_go526")]

[node name="player - audioListener" type="AudioListener3D" parent="player - origin"]

[node name="Left - controller" type="XRController3D" parent="player - origin"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.735)
tracker = &"left_hand"

[node name="MovementDirect" parent="player - origin/Left - controller" instance=ExtResource("5_tf8k3")]
strafe = true

[node name="LeftHand - model" parent="player - origin/Left - controller" instance=ExtResource("7_jrhbh")]

[node name="FunctionPickup" parent="player - origin/Left - controller" instance=ExtResource("8_utqbe")]
grab_distance = 0.05

[node name="Right - controller" type="XRController3D" parent="player - origin"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.735)
tracker = &"right_hand"

[node name="MovementTurn" parent="player - origin/Right - controller" instance=ExtResource("8_0i7al")]
turn_mode = 2

[node name="RightHand - model" parent="player - origin/Right - controller" instance=ExtResource("10_hlrtx")]
visible = false

[node name="FunctionPickup" parent="player - origin/Right - controller" instance=ExtResource("8_utqbe")]
grab_distance = 0.05

[node name="controller_right" parent="player - origin/Right - controller" instance=ExtResource("10_lclre")]
transform = Transform3D(0.17, 0, 0, 0, 0.17, 0, 0, 0, 0.17, 0, 0, 0)

[node name="joystick_origin" type="Node3D" parent="player - origin/Right - controller"]
transform = Transform3D(1, 0, 0, 0, 0.954761, -0.297375, 0, 0.297375, 0.954761, 0.0174398, 0.0348364, -0.0258448)
script = ExtResource("11_ltsit")

[node name="MeshInstance3D" type="MeshInstance3D" parent="player - origin/Right - controller/joystick_origin"]
transform = Transform3D(0.00472249, 0, 0, 0, 0.0135487, 0, 0, -2.32831e-10, 0.00482552, 0, 0.0153338, -5.96046e-08)
mesh = SubResource("CylinderMesh_hmnug")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_dsgym")

[node name="StaticBody3D" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.31124, -2.07135)

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(0.6, 0, 0, 0, 0.6, 0, 0, 0, 0.6, 0, 0, 0)
shape = SubResource("BoxShape3D_l5fid")

[node name="MeshInstance3D" type="MeshInstance3D" parent="StaticBody3D/CollisionShape3D"]
mesh = SubResource("BoxMesh_qye2y")

[node name="drone - PickableObject" parent="." instance=ExtResource("10_v7mpg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.14844, -2.04597)
press_to_hold = false

[node name="drone - hitboxLeftWing" type="CollisionPolygon3D" parent="drone - PickableObject"]
transform = Transform3D(0.2, 0, 0, 0, -8.74228e-09, 0.2, 0, -0.2, -8.74228e-09, 0.226011, -0.046453, -0.0182629)
depth = 0.165
polygon = PackedVector2Array(-0.0893041, 0.763616, -0.698407, 0.319239, -0.610297, -0.420112, 0.0600983, -0.726579, 0.676863, -0.282202, 0.584922, 0.464811)

[node name="drone - hitboxRightWing" type="CollisionPolygon3D" parent="drone - PickableObject"]
transform = Transform3D(0.195296, 0.043121, 1.88488e-09, 0, -8.74228e-09, 0.2, 0.043121, -0.195296, -8.53667e-09, -0.22523, -0.046, -0.00903416)
depth = 0.165
polygon = PackedVector2Array(-0.0902528, 0.804177, -0.684194, 0.359064, -0.598522, -0.376047, 0.0826526, -0.673117, 0.678156, -0.235076, 0.595117, 0.510505)

[node name="drone - hitboxMainBody" type="CollisionPolygon3D" parent="drone - PickableObject"]
transform = Transform3D(-8.74228e-09, 0, -0.2, 0, 0.2, 0, 0.2, 0, -8.74228e-09, 0, 0, 0)
depth = 0.835
polygon = PackedVector2Array(0.287065, 0.20322, 0.92293, 0.0366125, 0.891153, -0.261707, 0.356646, -0.324962, 0.35609, -0.405395, 0.255007, -0.40393, 0.231568, -0.324821, -0.326512, -0.271195, -0.773405, -0.147559, -0.776335, -0.401, -0.848118, -0.402465, -0.848118, -0.128515, -0.909647, -0.0977502, -0.883278, 0.268493)

[node name="drone fbx" parent="drone - PickableObject" instance=ExtResource("1_sdhml")]
transform = Transform3D(0.2, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0, 0, 0)

[node name="GrabPointHandLeft" parent="drone - PickableObject" instance=ExtResource("12_rovoh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.334864, 0.0139006, 0)
hand_pose = SubResource("Resource_841gg")

[node name="GrabPointHandRight" parent="drone - PickableObject" instance=ExtResource("13_trql2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.346723, 0, 0)

[connection signal="input_vector2_changed" from="player - origin/Right - controller" to="player - origin/Right - controller/joystick_origin" method="_on_right__controller_input_vector_2_changed"]
